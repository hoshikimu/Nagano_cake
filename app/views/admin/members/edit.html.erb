<%# 会員登録情報編集画面 %>

<div class="edit-member-info container">
  <div class="row">
  <% if @member.errors.any? %>
    <div id="error_explanation">
      <h2 style="color: red;"><%= @member.errors.count %>件のエラーが発生しました</h2>
      <ul style="color: red;">
        <% @member.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
    <h2><%= @member.name_family %><%= @member.name_first %>さんの登録情報編集</h2>
    <%= form_for(@member, url: admin_member_path ) do |f| %>
      <div class="col-xs-8">
        <table class="edit-member-table">
          <tbody>
            <tr class="edit-member-row">
              <td class="col-xs-3">会員ID</td>
              <td><%= @member.id %></td>
            </tr>
            <tr class="edit-member-row">
              <td class="col-xs-3">氏名</td>
              <td>
                <%= f.text_field :name_family, autofocus: true %>
                <%= f.text_field :name_first, autofocus: true %>
              </td>
            </tr>
            <tr class="edit-member-row">
              <td class="col-xs-3">フリガナ</td>
              <td>
                <%= f.text_field :name_family_kana, autofocus: true %>
                <%= f.text_field :name_first_kana, autofocus: true %> 
              </td>
            </tr>
            <tr class="edit-member-row">
              <td class="col-xs-3">郵便番号</td>
              <td><%= f.text_field :postal_code, autofocus: true %></td>
            </tr>
            <tr class="edit-member-row">
              <td class="col-xs-3">住所</td>
              <td class="edit-member-address"><%= f.text_field :address, autofocus: true, class: "edit-member-address" %></td>
            </tr>
            <tr class="edit-member-row">
              <td class="col-xs-3">電話番号</td>
              <td><%= f.text_field :phone_number, autofocus: true %></td>
            </tr>
            <tr class="edit-member-row">
              <td class="col-xs-3">メールアドレス</td>
              <td><%= f.text_field :email, autofocus: true %></td>
            </tr>
            <tr class="edit-member-row">
              <td class="col-xs-3">会員ステータス</td>
              <td>
                <%= f.radio_button :is_withdrawal_flag, :t, checked: true %>
                <%= f.label :is_withdrawal_flag, "有効", {value: :true}%>
                <%= f.radio_button :is_withdrawal_flag, :false %>
                <%= f.label :is_withdrawal_flag, "退会済み", {value: :false} %>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="edit-member-button">
           <%= f.submit '編集内容を保存する', class: "btn btn-primary"%>
        </div>
      <% end %>
      </div>
  </div>
</div>
<script>
  $(function(){
    $("#member_postal_code,#member_phone_number").change(function(){
      var str = $(this).val();
      str = str.replace( /[Ａ-Ｚａ-ｚ０-９－！”＃＄％＆’（）＝＜＞，．？＿［］｛｝＠＾～￥]/g, function(s) {
        return String.fromCharCode(s.charCodeAt(0) - 65248);
      });
      $(this).val(str);
    }).change();
  });
</script>